---
title: "Linkedin postings"
subtitle: "Part one"
author: "Sean Ng"
organization: "AIMdata"
date-modified: "11 January 2026"
execute: 
  echo: false
---


```{r setup, include = FALSE}

knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE, 
                      message = FALSE, 
                      fig.width = 9)


library(tidyverse)
library(here)
library(janitor)
library(scales)
library(tidytext)
library(widyr)
library(ggraph)
library(patchwork)
library(kableExtra)
library(viridis)
library(DT)
library(skimr)
library(jsonlite)
library(jsonld)

`%out%` <- Negate(`%in%`)
options(scipen = 100)
theme_set(theme_light())
range_wna <- function(x){(x-min(x, na.rm = TRUE))/(max(x, na.rm = TRUE)-min(x, na.rm = TRUE))}

Mode <- function(x) {
  ux <- unique(x)
  ux[which.max(tabulate(match(x, ux)))]
}
```



```{r data}

industries <- read_csv("./data/companies/company_industries.csv") |> 
  mutate(industry_simple = 
           case_when(
             industry %in% c("Staffing and Recruiting", 
                             "Human Resources Services") | 
               # This is "A Hiring Company"
               company_id == 101478385 ~ 
               "Recruiting", 
             industry %in% c("Farming", "Fisheries") ~ "Food Production", 
             industry %in% c("Business Consulting and Services", 
                             "Research Services", 
                             "Professional Training and Coaching", 
                             "Outsourcing and Offshoring Consulting",
                             "Government Relations Services", 
                             "Market Research", 
                             "Strategic Management Services", 
                             "Executive Offices", 
                             "Design Services") ~ 
               "Business Consulting", 
             industry %in% c("Public Relations and Communications Services", 
                             "Events Services", 
                             "Printing Services", 
                             "Graphic Design") ~ 
               "Communications and Events", 
             
             industry %in% c("IT Services and IT Consulting", 
                             "Software Development", 
                             "Computer and Network Security", 
                             "Technology, Information and Internet", 
                             "Information Services", 
                             "Computer Games", 
                             "Computer Networking Products", 
                             "Mobile Gaming Apps") ~ 
               "IT", 
             industry %in% c("Financial Services", 
                             "Banking", 
                             "Venture Capital and Private Equity Principals", 
                             "Investment Banking", 
                             "Investment Management", 
                             "Accounting") ~ 
               "Financial Services",  
             industry %in% c("Construction", 
                             "Wholesale Building Materials", 
                             "Civil Engineering", 
                             "Architecture and Planning") ~ 
               "Construction", 
             industry == "Advertising Services" ~ "Advertising", 
             industry %in% c("Non-profit Organizations", 
                            "Civic and Social Organizations", 
                            "Religious Institutions", 
                            "International Trade and Development", 
                            "Political Organizations", 
                            "Fundraising", 
                            "International Affairs", 
                            "Think Tanks", 
                            "Philanthropic Fundraising Services", 
                            "Public Policy Offices") ~ 
               "Civil Society", 
             industry %in% c("Real Estate", 
                             "Facilities Services", 
                             "Environmental Services", 
                             "Recreational Facilities", 
                             "Leasing Non-residential Real Estate") ~ 
               "Real Estate", 
             industry == "Insurance" ~ "Insurance", 
             industry %in% c("Law Practice", 
                             "Legal Services", 
                             "Administration of Justice", 
                             "Alternative Dispute Resolution") ~ 
               "Legal", 
             industry %in%  c("Higher Education", 
                              "Education Administration Programs", 
                              "Primary and Secondary Education", 
                              "E-Learning Providers") ~ 
               "Education", 
             industry %in% c("Government Administration", 
                             "Legislative Offices", 
                             "Individual and Family Services") ~ 
               "Government Administration",
             industry %in% c("Biotechnology Research", 
                             "Pharmaceuticals Manufacturing", 
                             "Nanotechnology Research") ~ 
               "Pharmaceuticals and Biotech", 
             industry %in% c("Food and Beverage Services", 
                             "Restaurants", 
                             "Beverage Manufacturing", 
                             "Dairy Product Manufacturing") ~ 
               "F&B", 
             industry %in% c("Mental Health Care",  
                             "Hospitals and Health Care", 
                             "Medical Practices")
             ~ "Healthcare", 
             industry %in% c("Medical Equipment Manufacturing", 
                             "Industrial Machinery Manufacturing", 
                             "Appliances, Electrical, and Electronics Manufacturing", 
                             "Food and Beverage Manufacturing",
                             "Pharmaceutical Manufacturing", 
                             "Defense and Space Manufacturing", 
                             "Chemical Manufacturing", 
                             "Motor Vehicle Manufacturing", 
                             "Renewable Energy Semiconductor Manufacturing", 
                             "Aviation and Aerospace Component Manufacturing", 
                             "Automation Machinery Manufacturing", 
                             "Packaging and Containers Manufacturing", 
                             "Semiconductor Manufacturing", 
                             "Personal Care Product Manufacturing", 
                             "Computers and Electronics Manufacturing", 
                             "Plastics Manufacturing", 
                             "Furniture and Home Furnishings Manufacturing", 
                             "Paper and Forest Product Manufacturing", 
                             "Textile Manufacturing",
                             "Computer Hardware Manufacturing", 
                             "Sporting Goods Manufacturing", 
                             "Glass, Ceramics and Concrete Manufacturing", 
                             "Railroad Equipment Manufacturing", 
                             "Shipbuilding", 
                             "Tobacco Manufacturing", 
                             "Machinery Manufacturing", 
                             "Manufacturing")  ~ 
               "Manufacturing", 
             industry %in% c("Oil and Gas", 
                             "Mining") ~ 
               "Natural Resources", 
             industry %in% c("Utilities", 
                             "Telecommunications", 
                             "Wireless Services") ~ 
               "Telecoms and Utilities", 
             industry %in% c("Entertainment Providers", 
                             "Spectator Sports", 
                             "Broadcast Media Production and Distribution", 
                             "Media Production", 
                             "Book and Periodical Publishing",
                             "Gambling Facilities and Casinos", 
                             "Museums, Historical Sites, and Zoos", 
                             "Online Audio and Video Media", 
                             "Musicians", 
                             "Performing Arts", 
                             "Translation and Localization", 
                             "Newspaper Publishing", 
                             "Artists and Writers", 
                             "Libraries", 
                             "Photography",
                             "Animation and Post-production", 
                             "Writing and Editing") ~ 
               "Entertainment", 
             # Tell me it's not true
             industry %in% c("Airlines and Aviation", 
                             "Transportation, Logistics, Supply Chain and Storage", 
                             "Freight and Package Transportation", 
                             "Maritime Transportation", 
                             "Warehousing and Storage", 
                             "Truck Transportation") ~ 
               "Transportation and Logistics", 
             industry %in% c("Retail", 
                             "Retail Apparel and Fashion", 
                             "Consumer Services", 
                             "Retail Luxury Goods and Jewelry", 
                             # Maybe contentious, but Costco is a retailer
                             "Wholesale", 
                             "Retail Office Equipment",
                             "Retail Groceries", 
                             "Wholesale Import and Export") ~ 
               "Retail and Sales", 
             industry %in% c("Security and Investigations", 
                             "Public Safety", 
                             "Law Enforcement", 
                             "Armed Forces") ~ "Security", 
             industry %in% c("Travel Arrangements", 
                             "Hospitality") ~ 
               "Hospitality and Travel",
             industry %in% c("Veterinary Services", 
                             "Alternative Medicine", 
                             "Wellness and Fitness Services") ~ "Wellness"
           )) |> 
  # Just dropping all the extras
  group_by(company_id) |> 
  slice_head(n = 1) |> 
  ungroup()

job_category_cleaning <- function(tbl){
  tbl |>  
    mutate(
      job_category = 
        case_when(
           # I think an Account Executive is part of the managerial class
          str_detect(title,
                     "Manager|MANAGER|Superintendent|Supervisor|Lead|Product Owner|Scrum Master|Cloud Architect|Sous Chef|Human Resources Business Partner|HR Business Partner|Account Executive")  & 
            !str_detect(title, "Chief") ~ 
            "Manager",
          str_detect(title, "Chief|Director|Business Owner|Co-Founder|Executive|Vice President|Head") & 
            !str_detect(title, "Executive Assistant") ~ 
                    "Director",
          str_detect(title, "Trainee|Intern|Paralegal|Entry Level|Support|Teller|ENTRY LEVEL|Accounting Clerk|Graduate Program|Universal Banker|Data Entry Clerk") ~ 
            "Entry Level",
          str_detect(title, "Engineer|Developer|Quality Inspector|Quality Control Inspector|Construction Inspector|User Experience Designer|UI/UX Designer") ~ 
            "Engineer", 
          str_detect(title, 
                     "Attorney|Nurse|Therapist|Dental Hygienist|Architect|Licensed Clinical Social Worker|Physician|Nurse|NURSE|RN|Registered Dietitian|Chemist|Dentist|OCCUPATIONAL THERAPIST|Licensed Mental Health Counselor|Pharmacist|Psychiatrist|Veterinarian|Accountant|Bookkeeper|Auditor|Clinician|Behavior Interventionist|Neurologist|Cardiologist|Optometrist|THERAPIST|Medicine Resident") ~ 
                    "Licensed Professional",
          str_detect(title, "Consultant|Advisor") ~ 
                    "Consultant", 
          str_detect(title, "Technician|Detailer|Mechanic|Forklift Operator|Electrician|Machinist|Equipment Operator|Carpenter|Assembler|Operator|Medical Biller|Hair Stylist|Coordinator|Dispatcher| Tech|Plumber") ~ 
                    "Technician",
          str_detect(title, "Officer|Social Worker|Teacher|TEACHER|teacher|Caseworker") &
            !str_detect(title, "Chief") ~ 
                    "Officer",
          str_detect(title, 
                    "Specialist|Technologist|Controller|Phlebotomist|Scientist|Pathologist|Estimator|Data Architect|System Administrator|Systems Administrator|Database Administrator|Planner|Java   Architect|Network Administrator|Salesforce Administrator") ~ 
                    "Specialist", 
                  str_detect(title, "Analyst|Data Modeler") ~ 
            "Analyst",
          # Not sure about "Buyer"
                  str_detect(
                    title, "Associate|Salesperson|Team Member|Generalist|Merchandiser|Human Resources   Business Partner|Buyer|Relationship Banker|salesperson|Retail Parts Pro|ASSOCIATE|Sales Agent|Sales Professional|Sleep Expert - Sales|Representative|REPRESENTATIVE| Rep|Personal Trainer|PROMOTIONS AND SALES POSITIONS|Insurance Agent|Personal Banker|Recruiter|Store Counter Sales") ~
            "Associate",
                  str_detect(title, 
                             "Assistant|Receptionist|Retail Sales – Part Time|Front Desk Agent|ASSISTANT|Aide|Office Administrator|Contract Administrator|Legal Secretary|Branch Office Administrator|Payroll Administrator|Inventory Control Clerk|Accounts Payable Clerk") ~ 
            "Assistant",
                  str_detect(title, "Writer|writer|Content Editor|Designer|Copy Editor|Video Editor") ~ 
            "Creative",
          str_detect(title, "Cook|Driver|Housekeeper|Cashier|Dishwasher|Server|Bartender|Warehouse Worker|Janitor|Groomer|Food Service Worker|Welder|Custodian|Laborer|Dashers|Housekeeping   Aide|Barista|In-Store Shopper|Handler|Stocker|Drive with DoorDash|Caregiver|Warehouse Part Time Overnight|Cleaner|Warehouse Part Time Days|Restaurant Delivery|Warehouse Order Selector|Groundskeeper|Keyholder|Porter|Valet|store driver|Concierge|Room Attendant|Attendant|General Labor|Production Worker") ~ 
                    "Labourer", 
                  TRUE ~ "Other"
                  )) |> 
    mutate(senior = ifelse(str_detect(title, "Senior"), 
                           "senior", 
                           "not senior")) 
}

# path = kagglehub.dataset_download("arshkon/linkedin-job-postings")
# https://www.kaggle.com/datasets/arshkon/linkedin-job-postings


postings_clean <- read_csv("./raw_data/postings.csv") |>
  filter(!is.na(company_id)) |> 
  left_join(
    industries,
    by = "company_id"
  ) |> 
  filter(!is.na(industry)) |> 
  filter(!is.na(company_name) & company_name != "Confidential") |> 
  # Likely typos since there's entry-level and associates
  # Fine to drop them since it's less than 10 entries
  filter(normalized_salary < 1000000 | is.na(normalized_salary)) |> 
  job_category_cleaning()

```

I think let's ignore all staffing and recruiting postings. 



## By industry

We're looking at another set of scraped data today. This time, over 124,000 LinkedIn job postings over 2023-2024 were scraped by [Arsh Koneru and Zoey Yu Zou](https://www.kaggle.com/datasets/arshkon/linkedin-job-postings). 

Let's start 

```{r}
summary_stats <- postings_clean |> 
  filter(industry_simple != "Recruiting") |> 
  group_by(industry_simple) |> 
  summarise(postings = n_distinct(job_id), 
            companies = n_distinct(company_id), 
            salary = mean(normalized_salary, na.rm = TRUE)) 

summary_stats |> 
  ggplot(aes(x = postings, 
             y = fct_reorder(industry_simple, postings))) +
  geom_col(aes(fill = companies)) + 
  scale_x_continuous(labels = comma) +
  scale_fill_viridis(direction = -1, option = "plasma", begin = .3) +
  labs(title = "LinkedIn job postings in 2023-2024, by industry", 
       subtitle = "Excludes postings by recruiters", 
       y = "", x = "Number of job postings", 
       fill = "Number of\ncompanies") + 
  theme(legend.position = "bottom") +
  
summary_stats |> 
  ggplot(aes(x = salary, 
             y = fct_reorder(industry_simple, postings))) +
  geom_col(aes(fill = salary)) +
  labs(x = "Mean salary (USD)", 
       y = "", 
       title = "Mean annual salary by industry", 
       subtitle = "Excludes postings by recruiters",
       fill = "Mean salary") +
  scale_fill_viridis(option = "plasma", direction = -1, begin = .3, 
                     labels = number_format(scale = .001, suffix = "k")) +
  scale_x_continuous(labels = comma) +
  theme(legend.position = "bottom") 
```

<br>

Looking at the five largest industries, by number of job postings, we can confirm several things that we already likely know from cultural osmosis: IT is a large and well-compensated industry and present the most opportunities for job seekers. Healthcare and Manufacturing, whilst having many new jobs, have middling salaries, on average. There are a large number of poorly-compensated retail jobs. Financial services have been dethroned by IT as the most "premium" industry -- likely because the financialisation and securitisation of everything means that all industries are now over-commodified, not just finance.  

But I'm curious, what about those of us not in the executive class (who have the liquidmetal ability to slink and spread themselves to various, unrelated industries)? Which industries have the highest proportions of "good jobs"? And what even is a "good job"? 

The IT and Healthcare industries have made the largest number of job postings on LinkedIn. IT and Manufacturing have the 

The IT industry continues to reward its workings comparatively well (to other industries, not to owners) and have more job postings than any other. Even with mass layoffs with the veneer of efficiency and AI, this trend probably continues to the present day. 





<br><br><br>

## Job categories

Let's add a column for job categories. Whilst the dataset does already have a column for `formatted experience level`, this data is lacking for 23% of all postings. I also find LinkedIn's experience categories to be too few and not distinctive enough. 

So, instead of the six categories (Internship, Entry-level, Associate, Mid-Senior level, Executive and Director) provided by LinkedIn, we now have fifteen. 

Now, my categorisation is admittedly imperfect, given the large portion of jobs in the "Other" category (now only 11% of the total). But there are diminishing returns to wading through that many layers of corporate obfuscation and doublespeak to determine where each job title should sit. 

A cursory inspection, plotted below, shows that my categorisation has been commonsensical. 

Directors, Engineers, Licensed Professionals and Managers earn the most. This lines up with our expectations and we will use these job categories in the later sections when we talk about "good jobs". I discounted "Consultants" as having good jobs since I am one myself and understand the unstable nature of this work.  


<br>


```{r}
postings_clean |>
  # Not sure this is the right filter
  # We can play around with it
  filter(normalized_salary > 1000 | is.na(normalized_salary)) |> 
  group_by(job_category) |> 
  summarise(n = n_distinct(job_id), 
            salary = mean(normalized_salary, na.rm = TRUE)) |> 
  ggplot(aes(x = n, 
             y = fct_reorder(job_category, salary))) + 
  geom_col(aes(fill = salary)) +
  geom_text(aes(label = comma(salary)), 
            hjust = "inward") +
  scale_fill_viridis(direction = -1, labels = comma) + 
  scale_x_continuous(labels = comma) + 
  labs(x = "Number of postings", 
       y = "", 
       title = "Mean annual salary (USD) by job category",
       subtitle = "LinkedIn postings in 2023-2024; mean annual salary at the end of the bar.", 
       fill = "Mean\nSalary", 
       caption = "Source: Arsh Koneru, Zoey Yu Zou and LinkedIn.com")

```

<br>

White-collar jobs continue to pay more than blue-collar ones: Technicians, on average, still earn less than Associates or Junior and Entry-level jobs. 

The rarest category of jobs are Creatives. But, unlike what your parents told you, they are reasonably compensated, just probably very scarce in comparison the number of Arts and Communications graduates that exist. 

<br><br><br>

## Which industries have the most good jobs? 

<br>

```{r}
postings_clean |> 
  filter(industry_simple != "Recruiting") |> 
  group_by(job_category, industry_simple) |> 
  summarise(n = n_distinct(job_id), 
            salary = mean(normalized_salary, na.rm = TRUE)) |> 
  group_by(industry_simple) |> 
  mutate(pc = n / sum(n),
         sort = sum(n[job_category %in% c(
           "Director", "Engineer", "Licensed Professional", "Manager")]) / 
           sum(n)) |> 
  ungroup() |> 
  mutate(job_category = fct_relevel(
    job_category, c("Director", "Engineer", "Licensed Professional", 
                    "Manager", "Consultant", "Creative", 
                    "Analyst", "Other", "Specialist", 
                    "Officer", "Associate", "Entry Level", 
                    "Technician", "Assistant", "Labourer")
  )) |> 
  arrange(desc(job_category)) |> 
  ggplot(aes(x = pc, y = fct_reorder(industry_simple, sort), 
             group = job_category)) + 
  geom_col(aes(fill = job_category)) + 
  
  geom_vline(xintercept = .5, linetype = "longdash", colour = "white", alpha = .4) +
  geom_vline(xintercept = .75, linetype = "longdash", colour = "white", alpha = .4) +
  scale_fill_viridis_d(option = "turbo") + 
  scale_x_continuous(labels = percent) +
  labs(title = "Breakdown of job postings by industry and job category", 
       subtitle = "Sorted by percentage of 'good jobs'", 
       x = "", y = "", 
       fill = "") + 
  theme(legend.text = element_text(size = 9))
```

<br>

Retail and sales is one of the least top heavy industries. 

Education is dying (perhaps as a backlash towards its intensive monetisation and the purposeful destruction of the teaching profession), so is the legal industry, as well as government administration, which I can attest to have been in a state of atrophy even before DOGE and the great sack of the American government. These industries have an even worse proportion of good jobs than the oft-memed about Travel industry. 

Education is also still surprisingly top-heavy for a dying industry. 

We should probably cross-reference this with data scraped from Indeed, but the only available dataset is only a marketing sample of 30,000 jobs. 

Declining birthrates play a role in declining education. 

Unfortunately, this dataset is not scraped every year, so we can't monitor 

Advertising, Entertainment and Pharmaceuticals and Biotech have the highest proportions of directors and executives. In Advertising's case: Creative Director 

If financialisation is the overcommodification 
Is AI-slopwork and black


<br>

```{r}
category_plot <- function(tbl){
  
  tbl |> 
     mutate(job_category = fct_relevel(
      job_category, c("Director", "Engineer", "Licensed Professional", 
                      "Manager", "Consultant", "Creative", 
                      "Analyst", "Other", "Specialist", 
                      "Officer", "Associate", "Entry Level", 
                      "Technician", "Assistant", "Labourer")
    )) |>
    group_by(industry, job_category) |> 
    summarise(postings = n_distinct(job_id), 
              companies = n_distinct(company_id), 
              .groups = "drop") |> 
    ggplot(aes(x = postings, 
               y = fct_reorder(industry, postings), 
               group = job_category)) +
    geom_col(aes(fill = job_category)) + 
    scale_fill_viridis_d(option = "turbo")
}
```



<br>

Higher education is your last hope for a good job in the Education industry
Why there are more postings in Higher Education than Primary and Secondary Education speaks to? 
Supposedly, there is much more job security and less turnover in Primary and Secondary Education. 

Why are there, proportionally, so many more director-level jobs in Education?
Is Education too top-heavy? 
Massive monetisation of education. 

More likely, 
So maybe, it's more accurate to say that Higher Education (and Private Education) is dying




### Applications

```{r}
postings_clean |> 
  filter(industry_simple != "Recruiting") |> 
  group_by(job_category, industry_simple) |> 
  summarise(n = n_distinct(job_id), 
            salary = mean(normalized_salary, na.rm = TRUE), 
            applies = sum(applies, na.rm = TRUE)) |> 
  group_by(industry_simple) |> 
  filter(!is.nan(salary)) |> 
  mutate(pc = n / sum(n), 
         pc_applies = applies / sum(applies), 
         sort = sum(applies[job_category %in% c(
           "Director", "Engineer", "Licensed Professional", "Manager")]) / 
           sum(applies)) |> 
  ungroup() |> 
  mutate(job_category = fct_relevel(
    job_category, c("Director", "Engineer", "Licensed Professional", 
                    "Manager", "Consultant", "Creative", 
                    "Analyst", "Other", "Specialist", 
                    "Officer", "Associate", "Entry Level", 
                    "Technician", "Assistant", "Labourer")
  )) |> 
  arrange(desc(job_category)) |> 
  ggplot(aes(x = pc_applies, y = fct_reorder(industry_simple, sort), 
             group = job_category)) + 
  geom_col(aes(fill = job_category)) + 
  geom_vline(xintercept = .5, linetype = "longdash", colour = "white", alpha = .4) +
  geom_vline(xintercept = .75, linetype = "longdash", colour = "white", alpha = .4) +
  scale_fill_viridis_d(option = "turbo") +
  scale_x_continuous(labels = percent) +
  labs(title = "Break down of applicants by job category and industry", 
       subtitle = "Sorted by percentage of applicants who apply for 'good jobs'", 
       x = "", y = "", 
       fill = "") + 
  theme(legend.text = element_text(size = 9))
```

<br>

```{r}
postings_clean |> 
  filter(industry_simple == "Advertising" & 
           job_category == "Engineer") |> 
  count(title, sort = TRUE)
```


Almost 25% of applications in the Hospitality and Travel industry are for director or c-suite positions. This percentage is also higher than 20% in Civil Society. 



### Most inequal industries 

In Pharmaceuticals and IT, more than 70% of the staff budget is dedicated towards Directors, Engineers, Licensed Professionals and Managers. This is somewhat commonsensical as these are highly specialised fields which often require even more training than postgraduate education can sometimes provide. 

Communications and Events and Entertainment, however, do not require the same degree of specialisation. And are particularly top-heavy. 

Government administration and Education are much more egalitarian, though not as lucrative. 

Advertising, Pharmaceuticals and Biotech and Communications and Events pay out more than 25% of salaries just to their directors, giving me Theranos flashbacks. Entertainment is very nearly there as well. 

This problem will likely continue as ballooning executive pay packages (Elon Musk insisting that shareholders owe him USD 1 trillion) and a managerial class that is not interested in shareholder needs. 

Summary of [this thread](https://www.reddit.com/r/Economics/comments/1fcl6xl/when_the_mismanagerial_class_destroys_great/)

the financialization of economy, with all businesses regarded by those who manage them — and create the regulatory frameworks within which they operate — simply as vehicles for generating profit.

the rise of a managerial class that is trained in a generalism often rooted in highly esoteric theories, mainly designed to hide that the fact that it lacks either depth or rigorous and repeatable scientific principles

```{r}
postings_clean |> 
  filter(industry_simple != "Recruiting") |> 
  group_by(job_category, industry_simple) |> 
  summarise(n = n_distinct(job_id), 
            salary = mean(normalized_salary, na.rm = TRUE)) |> 
  group_by(industry_simple) |> 
  filter(!is.nan(salary)) |> 
  mutate(pc = n / sum(n), 
         budget = n * salary, 
         pc_budget = budget / sum(budget),
         sort = sum(budget[job_category %in% c(
           "Director", "Engineer", "Licensed Professional", "Manager")]) / 
           sum(budget)) |> 
  ungroup() |> 
  mutate(job_category = fct_relevel(
    job_category, c("Director", "Engineer", "Licensed Professional", 
                    "Manager", "Consultant", "Creative", 
                    "Analyst", "Other", "Specialist", 
                    "Officer", "Associate", "Entry Level", 
                    "Technician", "Assistant", "Labourer")
  )) |> 
  arrange(desc(job_category)) |> 
  ggplot(aes(x = pc_budget, y = fct_reorder(industry_simple, sort), 
             group = job_category)) + 
  geom_col(aes(fill = job_category)) + 
  geom_vline(xintercept = .5, linetype = "longdash", colour = "white", alpha = .4) +
  geom_vline(xintercept = .75, linetype = "longdash", colour = "white", alpha = .4) +
  scale_fill_viridis_d(option = "turbo") +
  scale_x_continuous(labels = percent) +
  labs(title = "Which industries are top-heavy?", 
       subtitle = "Sorted by percentage of 'staffing budget' consumed by the top-end", 
       x = "", y = "", 
       fill = "") + 
  theme(legend.text = element_text(size = 9))
```


### Case study

```{r}
postings_clean |> 
  filter()
```



```{r}
postings_clean |>
  job_category_cleaning() |> 
  filter(job_category == "Manager") |> 
  count(title, sort = TRUE)
  filter(is.na(job_category)) |> 
  arrange(desc(n))
```

```{r}
postings_clean |> 
  job_category_cleaning() |> 
  filter(normalized_salary < 500000 ) |> 
  ggplot(aes(x = normalized_salary)) + 
  geom_histogram() 
  select(title, max_salary, med_salary, min_salary, pay_period, normalized_salary)
```

<br>

53% of LinkedIn users earn more than USD 100,000 a year. 54% of college graduates use LinkedIn. 

https://blog.hootsuite.com/linkedin-demographics/#:~:text=What%20the%20data%20tells%20us,makers%20and%20executive%20audiences%20worldwide.

### A note on Enshittification 

How much exists in the world of numbers and the world of humans? 

If financialisation is the the [increasing role](https://www.tni.org/en/publication/financialisation-a-primer) of financial motives, markets, actors and insitutions, resulting in "financial intermediaries and technologies [gaining] an unprecedented influence over our lives", the perhaps enshittification is process by which AIs, algorithms, perverse indicators, gamification and over-optimisation (corner cutting) have reduced and cheapened our lives. 

Perhaps a key concept here is marginality or iteration, as in incremental gains from 

One clear example of this is just how many Software Engineers are hired in Advertising. 

financial intermediaries and technologies have gained unprecedented influence over our daily lives

financialization means the increasing role of financial motives, financial markets, financial actors and financial institutions in the operation of the domestic and international economies

```{r}
postings_clean |> 
  filter(str_detect(title, "ML")) |> 
  count(title, sort = TRUE)

postings_clean |> 
  filter(industry_simple == "IT") |> 
  count(title, sort = TRUE)
```

```{r}
str_detect(title, "Software|Data|Network|UI|DevOps|Full Stack|System|Cloud|Application|Site Reliability|Machine Learning|Cyber|Developer|Java|Security Engineer|Database|Data Architect|Modeler|Datacenter|Data Center|BI|Azure|Databricks|UI|UX|Python|Solution|Dotnet|Online|Product Owner|Scrum|Automation|Oracle|User|Validation|Salesforce|Mule|Desktop|Android|Information Security|Information Technology|Information System|Digital|Digital Adoption|Adoption|Agile|Frontend|Business Analyst|Technical Lead|AI|Artificial Intelligence|Quality Assurance Engineer|Mainframe|ServiceNow|Enterprise Architect|Generative|ML") & 
  !str_detect(title, "TRAINING|AIDE|QUAIL|MAINTENANCE|CHAPLAIN|AML|MLT")
```


## Industry consolidation and oligopolies

We live in trying times. The barrier to entry 

Don't put all your eggs in one basket

<br>

```{r}
postings_clean |> 
  filter(industry_simple != "Recruiting" & company_name != "A Hiring Company") |> 
  group_by(industry_simple, company_id) |> 
  summarise(postings = n_distinct(job_id), 
            .groups = "drop") |> 
  group_by(industry_simple) |> 
  mutate(industry_postings = sum(postings), 
         pc = postings / industry_postings) |> 
  filter(industry_postings > 100) |> 
  arrange(desc(pc)) |> 
  slice_head(n = 20) |>
  group_by(industry_simple) |> 
  summarise(pc = sum(pc)) |> 
  ungroup() |> 
  ggplot(aes(x = pc, y = fct_reorder(industry_simple, pc))) + 
  geom_col(fill = "#adc178") + 
  geom_text(aes(label = percent(round(pc, 3))), 
            hjust = "inward") +
  scale_x_continuous(labels = percent, breaks = seq(0, .8, .1)) +
  labs(title = "All industries are incredibly consolidated", 
       subtitle = "Percentage of total jobs posted by the top 20 companies", 
       x = "", y = "")
    
  
```

<br>

```{r}
postings_clean |> 
  filter(industry_simple %in% c("Security", "Telecoms and Utilities", 
                                "Hospitality and Travel", "F&B", 
                                "Wellness")) |> 
  mutate(industry_simple = fct_relevel(industry_simple, 
                                       c("Security", "Telecoms and Utilities",
                                         "Hospitality and Travel", "F&B",
                                         "Wellness"))) |> 
  group_by(industry_simple, company_name) |> 
  summarise(postings = n_distinct(job_id), 
            .groups = "drop") |> 
  group_by(industry_simple) |> 
  mutate(industry_postings = sum(postings), 
         pc = round(postings / industry_postings * 100, 2)) |> 
  arrange(desc(pc)) |> 
  slice_head(n = 5) |>
  ungroup() |>
  select(-postings, -industry_postings) |> 
  kable(booktabs = TRUE, 
        caption = "Percent of postings by the five largest hirers per industry") |> 
  kable_classic_2("striped")
  
```

<br>

Whilst this is no [Herfindahl-Hirschman Index](https://en.wikipedia.org/wiki/Herfindahl%E2%80%93Hirschman_index#:~:text=HHI%20is%20calculated%20by%20squaring,share%2C%20weighted%20by%20market%20share.) (HHI), 

Though if you were to search up "Herfindahl-Hirschman Index by industry", you will find no relevant recent results. Perhaps of an indications that the oligopolistic tendencies of the corporate overclass have long gone unchecked and unquestioned. 

The last mention of it by the Bureau of Labor Statistics dates back to 2012 (with a report in 2014), and even then, the report never looks at consolidation and overconcentration of jobs within industries. But the position of the US government on oligopolies has long been clear. 

All industries show signs of oligopoly and excess concentration -- even in IT, 20 companies post 20% of all jobs. Notwithstanding the FAANG companies' stranglehold on patents and market capitalisation. 
 
So, what does this mean for you and me? If you were hoping that I would share some insights on how to pull the ladder up behind yourself,  



```{r}
postings_clean |> 
  glimpse()
```



## Indeed

```{r}
indeed <- stream_in(file(("./data/marketing_sample_for_indeed_usa-indeed_usa_job__20210101_20210331__30k_data.ldjson")))

indeed |> glimpse()

indeed |> count(category, sort = TRUE)
```


Contrary to the popular and misguided belief that government workers are parasites, government administration is not only a very small portion of job postings, but neither are their workers particularly well-compensated. 